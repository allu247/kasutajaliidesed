{"remainingRequest":"C:\\Users\\alvar\\IdeaProjects\\cgiProject\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\alvar\\IdeaProjects\\cgiProject\\front-end\\app\\src\\components\\editBook.vue?vue&type=style&index=0&id=2ce992a3&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\alvar\\IdeaProjects\\cgiProject\\front-end\\app\\src\\components\\editBook.vue","mtime":1556404692748},{"path":"C:\\Users\\alvar\\IdeaProjects\\cgiProject\\front-end\\app\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\alvar\\IdeaProjects\\cgiProject\\front-end\\app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\alvar\\IdeaProjects\\cgiProject\\front-end\\app\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\alvar\\IdeaProjects\\cgiProject\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\alvar\\IdeaProjects\\cgiProject\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.post-item {\n  background-color: #f9f9f9;\n  border-left: 4px solid #e9e9e9;\n}\n\n.reply-area {\n  background-color: #f9f9f9;\n}\n\n.custom-file-upload {\n  border: 2px solid gray;\n  color: gray;\n  background-color: white;\n  padding: 8px 20px;\n  border-radius: 8px;\n  font-size: 20px;\n  font-weight: bold;\n}\n\ninput[type=file] {\n  display: none;\n}\n",{"version":3,"sources":["editBook.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4KA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"editBook.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-xl-7 col-lg-8 col-md-9 col-sm-11\">\r\n\r\n        <h3>Edit book</h3>\r\n\r\n        <form id=\"edit-form\" @submit.prevent=\"saveEditBook\" data-vv-scope=\"editing\">\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"topic\">Topic:</label>\r\n            <select class=\"form-control\" id=\"topic\" name=\"topic\" v-model=\"topic\" v-validate=\"{ required: true }\">\r\n              <option value=\"Mathematics\">Mathematics</option>\r\n              <option value=\"Physics\">Physics</option>\r\n              <option value=\"Chemistry\">Chemistry</option>\r\n              <option value=\"Biology\">Biology</option>\r\n              <option value=\"Computer_Science\">Computer Science</option>\r\n              <option value=\"Varia\" selected=\"selected\">Varia</option>\r\n            </select>\r\n            <div class=\"error\" v-if=\"errors.has('editing.topic')\">{{errors.first('editing.topic')}}</div>\r\n          </div>\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"title\">Title:</label>\r\n            <input id=\"title\" class=\"form-control\" type=\"text\" name=\"title\" placeholder=\"Title\"\r\n                   v-model=\"title\" v-validate=\"{ required: true, min: 3, max: 128 }\">\r\n            <div class=\"error\" v-if=\"errors.has('editing.title')\">{{errors.first('editing.title')}}</div>\r\n          </div>\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"author\">Author:</label>\r\n            <input class=\"form-control\" id=\"author\"\r\n                   name=\"author\" placeholder=\"Author\"\r\n                   v-model=\"author\" v-validate=\"{ required: true, min: 5 }\">\r\n            <div class=\"error\" v-if=\"errors.has('editing.author')\">{{errors.first('editing.author')}}</div>\r\n          </div>\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"ISBN\">ISBN:</label>\r\n            <input id=\"ISBN\" class=\"form-control\" type=\"text\" name=\"ISBN\"\r\n                   placeholder=\"ISBN\" v-model=\"ISBN\" v-validate=\"{ required: true, min: 5 }\">\r\n            <div class=\"error\" v-if=\"errors.has('editing.isbn')\">{{errors.first('editing.isbn')}}</div>\r\n          </div>\r\n\r\n\r\n          <input class=\"btn btn-lg btn-primary mb-3\" type=\"submit\" value=\"Edit\">\r\n        </form>\r\n\r\n        <div class=\"post-item text-left p-2 mx-2 mb-2\" v-for=\"answer in response.comments\" :key='answer.id'>\r\n          <div class=\"text-left\">\r\n            <p class=\"mb-1\">{{answer.comment}}</p>\r\n            <p class=\"mt-2 mb-1\">\r\n              <small>\r\n                Added: {{ answer.postedAt | moment(\"dddd, MMMM Do YYYY h:mm:ss a\") }}\r\n              </small>\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <form class=\"my-3 p-2 reply-area\" id=\"comment-form\" @submit.prevent=\"postComment\" data-vv-scope=\"commenting\">\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"exampleFormControlTextarea1\">Add comment to this book:</label>\r\n            <textarea class=\"form-control\" id=\"exampleFormControlTextarea1\" rows=\"3\" name=\"comment\" placeholder=\"Comment\"\r\n                      v-model=\"comment\" v-validate=\"{ required: true, min: 5 }\"></textarea>\r\n            <div class=\"error\" v-if=\"errors.has('commenting.comment')\">{{errors.first('commenting.comment')}}</div>\r\n          </div>\r\n          <input class=\"btn btn-lg btn-primary\" type=\"submit\" value=\"Add comment\">\r\n        </form>\r\n\r\n      </div>\r\n      <br>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n    import apiRequests from '../javascript/apiRequests.js';\r\n    import errorHandling from './../javascript/errorHandling.js';\r\n\r\n    export default {\r\n        name: 'viewpost',\r\n        data() {\r\n            return {\r\n                response: [],\r\n                topic: 'Varia',\r\n                title: '',\r\n                author: '',\r\n                ISBN: '',\r\n                comment: '',\r\n\r\n            };\r\n        },\r\n        methods: {\r\n\r\n            resetFields() {\r\n                this.comment = '';\r\n                this.$nextTick(() => this.$validator.reset())\r\n            },\r\n            loadPost() {\r\n                apiRequests\r\n                    .getRequestToApi('/api/books/' + this.$route.params.Pid)\r\n                    .then((response) => {\r\n                        this.response = response.data;\r\n                    })\r\n                    .catch(() => {\r\n                            errorHandling.errorMsgWithButton(\"This book no longer exists!\")\r\n                        }\r\n                    );\r\n            },\r\n\r\n          saveEditBook() {\r\n            this.$validator.validateAll(\"editing\").then(valid => {\r\n              if (!valid) {\r\n                errorHandling.errorMsg(\"These changes are forbidden!\", 1000);\r\n              } else {\r\n                apiRequests\r\n                        .patchRequestToApi('/api/edit/book/' + this.$route.params.Pid, {\r\n                          topic: this.topic,\r\n                          title: this.title,\r\n                          author: this.author,\r\n                          isbn: this.ISBN\r\n\r\n\r\n                        })\r\n                        .then(() => {\r\n                                  errorHandling.successMsg(\"Book successfully edited!\", 1200);\r\n                                  this.resetFields();\r\n                              })\r\n                        .catch(() => {\r\n                                      errorHandling.errorMsgWithButton(\"Failed to update this book!\")\r\n                                    }\r\n                            );\r\n              }\r\n            });\r\n          },\r\n\r\n            postComment() {\r\n            this.$validator.validateAll(\"commenting\").then(valid => {\r\n                if (valid) {\r\n                    apiRequests\r\n                        .postRequestToApi('/api/add/comment', {\r\n                                bookId: this.$route.params.Pid,\r\n                                comment: this.comment,\r\n\r\n                            }\r\n                        )\r\n                        .then(() => {\r\n                            this.resetFields();\r\n                            this.loadPost();\r\n                        })\r\n                        .catch((error) => {\r\n\r\n                            errorHandling.errorMsgWithButton(\"Sorry, \" +\r\n                                \"there was a problem and the comment couldn't be uploaded!\");\r\n                        });\r\n                }\r\n            })\r\n            }\r\n\r\n\r\n        },\r\n\r\n\r\n\r\n        mounted() {\r\n            this.loadPost();\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n  .post-item {\r\n    background-color: #f9f9f9;\r\n    border-left: 4px solid #e9e9e9;\r\n  }\r\n\r\n  .reply-area {\r\n    background-color: #f9f9f9;\r\n  }\r\n\r\n  .custom-file-upload {\r\n    border: 2px solid gray;\r\n    color: gray;\r\n    background-color: white;\r\n    padding: 8px 20px;\r\n    border-radius: 8px;\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n  }\r\n\r\n  input[type=file] {\r\n    display: none;\r\n  }\r\n</style>\r\n"]}]}